<!-- 클라이언트 측 코드 -->
<%- include('header.ejs') %>

<% if (user_id) { %>
    <h1 class="display-4"><%= name %>님</h1>
    <p class="lead">선택하세요</p>

    <!-- Add buttons for each category -->
    <div class="container">
      <div class="row row-cols-5">
        <% categories.forEach(category => { %>
          <div class="col mb-3">
            <button type="button" class="btn btn-outline-info category-btn rounded-3" data-category="<%= category %>">
              <span class="fs-4"><%= category %></span>
            </button>
          </div>
        <% }) %>
      </div>
    </div>

    <button type="button" class="btn btn-primary btn-lg mt-3" id="viewBtn">보기</button>

    <!-- Add a container to display selected categories -->
    <div id="selectedCategories" class="mt-3"></div>
    <style>
      .category-btn {
          width: 100%;
          height: 100%;
          min-width: 120px; /* 최소 너비 설정 */
          min-height: 150px; /* 최소 높이 설정 */
      }
  
      .fs-4 {
          font-size: 1.5rem;
      }
    </style>
  
    
    <script>
      // JavaScript code for handling category selection
      document.addEventListener("DOMContentLoaded", function () {
        const categoryButtons = document.querySelectorAll(".category-btn");
        const viewButton = document.getElementById("viewBtn");
        const selectedCategoriesDiv = document.getElementById("selectedCategories");
    
        let selectedCategories = [];
    
        // Add event listeners to category buttons
        categoryButtons.forEach((button) => {
          button.addEventListener("click", function () {
            // Toggle active class on button click
            button.classList.toggle("active");
    
            // Update the selected categories array
            const category = button.dataset.category;
            if (selectedCategories.includes(category)) {
              selectedCategories = selectedCategories.filter(c => c !== category);
            } else {
              selectedCategories.push(category);
            }
          });
        });
    
        // Add event listener to the "보기" button
        viewButton.addEventListener("click", function () {
          // Display selected categories
          selectedCategoriesDiv.innerHTML = `<p>선택된 카테고리: ${selectedCategories.join(', ')}</p>`;
    
          // TODO: Redirect or perform action based on selectedCategories
        });
      });
    </script>







<% } else { %>
  <p class="lead">로그인이 필요합니다</p>
  <a class="btn btn-primary btn-lg" href="/recommendlogin" role="button">로그인!</a>
<% } %>

<%- include('footer.ejs') %>


